addpath('/Users/ajaver/GitHub_repositories/SegWorm/Only_segWorm/normWorms')
main_dir = '/Users/ajaver/Desktop/Gecko_compressed/image_dums/';

files = dir([main_dir '*.txt']);

moves = [0, 0];
origins = [0,0];
pixel2MicronScale = [1, 1];
rotation = 1;
downSamples = 65;
for ii = 1:100
    mask = csvread([main_dir, files(ii).name]);
    imgData = 
    maskData, imgWidth, imgHeight, frame, bodyScale, verbose
    mask(:)
    [worm, errNum, errMsg] = segWormBWimg(,mask(:), size(mask,1), size(mask,2), 1, 0.1, false);
    disp(ii)
    disp(errMsg)
    
    %{
    figure
    imshow(mask)
    hold on
    if ~isempty(worm)
        plot(worm.skeleton.pixels(:,2), worm.skeleton.pixels(:,1))
        plot(worm.contour.pixels(:,2), worm.contour.pixels(:,1), 'r')
        %{
        [vulvaContour nonVulvaContour skeleton skeletonAngles ...
                    inOutTouch skeletonLength widths headArea tailArea ...
                    vulvaArea nonVulvaArea] = normWorms({worm}, ...
                    downSamples);%, origins, moves, pixel2MicronScale, rotation, false);
                
        plot(worm.skeleton.pixels(:,2), worm.skeleton.pixels(:,1))
        plot(worm.contour.pixels(:,2), worm.contour.pixels(:,1), 'r')
        plot(skeleton(:,1), skeleton(:,2), '.-g')
        plot(nonVulvaContour(:,1), nonVulvaContour(:,2), '.-g')
        plot(vulvaContour(:,1), vulvaContour(:,2), '.-g')
        %}
    end
    %}
end